<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ElasticSearch Rest API | DB-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/db-tutorial/favicon.ico">
    <meta name="description" content="æ•°æ®åº“æ•™ç¨‹">
    
    <link rel="preload" href="/db-tutorial/assets/css/0.styles.f78e4e1a.css" as="style"><link rel="preload" href="/db-tutorial/assets/js/app.3241dbe7.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/4.4288f8e2.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/16.6bca419e.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/5.9d6e4fe2.js" as="script"><link rel="prefetch" href="/db-tutorial/assets/js/10.ed8ad29b.js"><link rel="prefetch" href="/db-tutorial/assets/js/11.fe610bae.js"><link rel="prefetch" href="/db-tutorial/assets/js/12.a246bf62.js"><link rel="prefetch" href="/db-tutorial/assets/js/13.3e80d87c.js"><link rel="prefetch" href="/db-tutorial/assets/js/14.550882cc.js"><link rel="prefetch" href="/db-tutorial/assets/js/15.5e1b41b9.js"><link rel="prefetch" href="/db-tutorial/assets/js/17.a5628e11.js"><link rel="prefetch" href="/db-tutorial/assets/js/18.11142214.js"><link rel="prefetch" href="/db-tutorial/assets/js/19.b7dd25b2.js"><link rel="prefetch" href="/db-tutorial/assets/js/20.743a9fc2.js"><link rel="prefetch" href="/db-tutorial/assets/js/21.bb9e859e.js"><link rel="prefetch" href="/db-tutorial/assets/js/22.8793bf57.js"><link rel="prefetch" href="/db-tutorial/assets/js/23.aa1a0789.js"><link rel="prefetch" href="/db-tutorial/assets/js/24.989edd40.js"><link rel="prefetch" href="/db-tutorial/assets/js/25.f951c2ea.js"><link rel="prefetch" href="/db-tutorial/assets/js/26.46d14ec4.js"><link rel="prefetch" href="/db-tutorial/assets/js/27.bbb4d038.js"><link rel="prefetch" href="/db-tutorial/assets/js/28.ca5b12bf.js"><link rel="prefetch" href="/db-tutorial/assets/js/29.ed8acf51.js"><link rel="prefetch" href="/db-tutorial/assets/js/30.4c80e86e.js"><link rel="prefetch" href="/db-tutorial/assets/js/31.270d3076.js"><link rel="prefetch" href="/db-tutorial/assets/js/32.63fd0b9f.js"><link rel="prefetch" href="/db-tutorial/assets/js/33.71243bd6.js"><link rel="prefetch" href="/db-tutorial/assets/js/34.e1c65173.js"><link rel="prefetch" href="/db-tutorial/assets/js/35.535365fb.js"><link rel="prefetch" href="/db-tutorial/assets/js/36.269fbb7d.js"><link rel="prefetch" href="/db-tutorial/assets/js/37.54d40d65.js"><link rel="prefetch" href="/db-tutorial/assets/js/38.70c2df36.js"><link rel="prefetch" href="/db-tutorial/assets/js/39.720ed2bc.js"><link rel="prefetch" href="/db-tutorial/assets/js/40.42f49b04.js"><link rel="prefetch" href="/db-tutorial/assets/js/41.816b4788.js"><link rel="prefetch" href="/db-tutorial/assets/js/42.7812fbfa.js"><link rel="prefetch" href="/db-tutorial/assets/js/43.40e17f2b.js"><link rel="prefetch" href="/db-tutorial/assets/js/44.d4bf4d23.js"><link rel="prefetch" href="/db-tutorial/assets/js/45.de070dec.js"><link rel="prefetch" href="/db-tutorial/assets/js/46.72b9fb0c.js"><link rel="prefetch" href="/db-tutorial/assets/js/47.0d15ed92.js"><link rel="prefetch" href="/db-tutorial/assets/js/48.62942aa8.js"><link rel="prefetch" href="/db-tutorial/assets/js/49.5cc48c74.js"><link rel="prefetch" href="/db-tutorial/assets/js/50.05a3829b.js"><link rel="prefetch" href="/db-tutorial/assets/js/51.c4a344da.js"><link rel="prefetch" href="/db-tutorial/assets/js/52.780ee075.js"><link rel="prefetch" href="/db-tutorial/assets/js/53.db2f332a.js"><link rel="prefetch" href="/db-tutorial/assets/js/54.0e78a0f9.js"><link rel="prefetch" href="/db-tutorial/assets/js/55.6541a955.js"><link rel="prefetch" href="/db-tutorial/assets/js/56.148da909.js"><link rel="prefetch" href="/db-tutorial/assets/js/57.c474daee.js"><link rel="prefetch" href="/db-tutorial/assets/js/58.c896e61d.js"><link rel="prefetch" href="/db-tutorial/assets/js/59.078e1f3a.js"><link rel="prefetch" href="/db-tutorial/assets/js/6.11804af7.js"><link rel="prefetch" href="/db-tutorial/assets/js/60.1169b208.js"><link rel="prefetch" href="/db-tutorial/assets/js/61.31b49b6a.js"><link rel="prefetch" href="/db-tutorial/assets/js/62.5e22d6f5.js"><link rel="prefetch" href="/db-tutorial/assets/js/63.d0836f60.js"><link rel="prefetch" href="/db-tutorial/assets/js/64.1e454e0d.js"><link rel="prefetch" href="/db-tutorial/assets/js/65.862548ea.js"><link rel="prefetch" href="/db-tutorial/assets/js/66.597479ba.js"><link rel="prefetch" href="/db-tutorial/assets/js/67.c19ec16c.js"><link rel="prefetch" href="/db-tutorial/assets/js/68.7794c626.js"><link rel="prefetch" href="/db-tutorial/assets/js/69.a99ae4f0.js"><link rel="prefetch" href="/db-tutorial/assets/js/7.d55602d2.js"><link rel="prefetch" href="/db-tutorial/assets/js/70.34e977d4.js"><link rel="prefetch" href="/db-tutorial/assets/js/71.c1b90167.js"><link rel="prefetch" href="/db-tutorial/assets/js/72.9792a914.js"><link rel="prefetch" href="/db-tutorial/assets/js/73.6fbf9550.js"><link rel="prefetch" href="/db-tutorial/assets/js/74.b8949f4c.js"><link rel="prefetch" href="/db-tutorial/assets/js/75.3c3abd9f.js"><link rel="prefetch" href="/db-tutorial/assets/js/76.729c9c46.js"><link rel="prefetch" href="/db-tutorial/assets/js/77.a1a0aa21.js"><link rel="prefetch" href="/db-tutorial/assets/js/8.89e9ace9.js"><link rel="prefetch" href="/db-tutorial/assets/js/9.0c40eb95.js"><link rel="prefetch" href="/db-tutorial/assets/js/vendors~flowchart.5998caa6.js"><link rel="prefetch" href="/db-tutorial/assets/js/vendors~notification.943e54fe.js">
    <link rel="stylesheet" href="/db-tutorial/assets/css/0.styles.f78e4e1a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/db-tutorial/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo-200.png" alt="DB-TUTORIAL" class="logo"> <span class="site-name can-hide">DB-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/db-tutorial/sql/" class="nav-link">
  SQL
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/" class="nav-link router-link-active">
  NOSQL
</a></div><div class="nav-item"><a href="/db-tutorial/sql/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/redis/" class="nav-link">
  Redis
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/elasticsearch/" class="nav-link router-link-active">
  Elasticsearch
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/mongodb/" class="nav-link">
  MongoDB
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/db-tutorial/sql/" class="nav-link">
  SQL
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/" class="nav-link router-link-active">
  NOSQL
</a></div><div class="nav-item"><a href="/db-tutorial/sql/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/redis/" class="nav-link">
  Redis
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/elasticsearch/" class="nav-link router-link-active">
  Elasticsearch
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/mongodb/" class="nav-link">
  MongoDB
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ElasticSearch Rest API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_1-elasticsearch-rest-api-è¯­æ³•æ ¼å¼" class="sidebar-link">1. ElasticSearch Rest API è¯­æ³•æ ¼å¼</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_2-ç´¢å¼•-api" class="sidebar-link">2. ç´¢å¼• API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_2-1-åˆ›å»ºç´¢å¼•" class="sidebar-link">2.1. åˆ›å»ºç´¢å¼•</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_2-2-åˆ é™¤ç´¢å¼•" class="sidebar-link">2.2. åˆ é™¤ç´¢å¼•</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_2-3-æŸ¥çœ‹ç´¢å¼•" class="sidebar-link">2.3. æŸ¥çœ‹ç´¢å¼•</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_2-4-ç´¢å¼•åˆ«å" class="sidebar-link">2.4. ç´¢å¼•åˆ«å</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_2-5-æ‰“å¼€-å…³é—­ç´¢å¼•" class="sidebar-link">2.5. æ‰“å¼€/å…³é—­ç´¢å¼•</a></li></ul></li><li><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-æ–‡æ¡£" class="sidebar-link">3. æ–‡æ¡£</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-1-åˆ›å»ºæ–‡æ¡£" class="sidebar-link">3.1. åˆ›å»ºæ–‡æ¡£</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-2-åˆ é™¤æ–‡æ¡£" class="sidebar-link">3.2. åˆ é™¤æ–‡æ¡£</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-3-æ›´æ–°æ–‡æ¡£" class="sidebar-link">3.3. æ›´æ–°æ–‡æ¡£</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-4-æŸ¥è¯¢æ–‡æ¡£" class="sidebar-link">3.4. æŸ¥è¯¢æ–‡æ¡£</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-5-å…¨æ–‡æœç´¢" class="sidebar-link">3.5. å…¨æ–‡æœç´¢</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-6-é€»è¾‘è¿ç®—" class="sidebar-link">3.6. é€»è¾‘è¿ç®—</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-7-æ‰¹é‡æ‰§è¡Œ" class="sidebar-link">3.7. æ‰¹é‡æ‰§è¡Œ</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-8-æ‰¹é‡è¯»å–" class="sidebar-link">3.8. æ‰¹é‡è¯»å–</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-9-æ‰¹é‡æŸ¥è¯¢" class="sidebar-link">3.9. æ‰¹é‡æŸ¥è¯¢</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-10-uri-search-æŸ¥è¯¢è¯­ä¹‰" class="sidebar-link">3.10. URI Search æŸ¥è¯¢è¯­ä¹‰</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_3-11-request-body-dsl" class="sidebar-link">3.11. Request Body &amp; DSL</a></li></ul></li><li><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_4-é›†ç¾¤-api" class="sidebar-link">4. é›†ç¾¤ API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_4-1-é›†ç¾¤å¥åº·-api" class="sidebar-link">4.1. é›†ç¾¤å¥åº· API</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_4-2-é›†ç¾¤çŠ¶æ€-api" class="sidebar-link">4.2. é›†ç¾¤çŠ¶æ€ API</a></li></ul></li><li><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_5-èŠ‚ç‚¹-api" class="sidebar-link">5. èŠ‚ç‚¹ API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_6-åˆ†ç‰‡-api" class="sidebar-link">6. åˆ†ç‰‡ API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_7-ç›‘æ§-api" class="sidebar-link">7. ç›‘æ§ API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/db-tutorial/nosql/elasticsearch/ElasticsearchRestApi.html#_8-å‚è€ƒèµ„æ–™" class="sidebar-link">8. å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="elasticsearch-rest-api"><a href="#elasticsearch-rest-api" class="header-anchor">#</a> ElasticSearch Rest API</h1> <blockquote><p><strong><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€RESTful é£æ ¼çš„æœç´¢å’Œæ•°æ®åˆ†æå¼•æ“</strong>ï¼Œèƒ½å¤Ÿè§£å†³ä¸æ–­æ¶Œç°å‡ºçš„å„ç§ç”¨ä¾‹ã€‚ ä½œä¸º Elastic Stack çš„æ ¸å¿ƒï¼Œå®ƒé›†ä¸­å­˜å‚¨æ‚¨çš„æ•°æ®ï¼Œå¸®åŠ©æ‚¨å‘ç°æ„æ–™ä¹‹ä¸­ä»¥åŠæ„æ–™ä¹‹å¤–çš„æƒ…å†µã€‚</p> <p><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åŸºäºæœç´¢åº“ <a href="https://github.com/apache/lucene-solr" target="_blank" rel="noopener noreferrer">Lucene<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å¼€å‘ã€‚ElasticSearch éšè—äº† Lucene çš„å¤æ‚æ€§ï¼Œæä¾›äº†ç®€å•æ˜“ç”¨çš„ REST API / Java API æ¥å£ï¼ˆå¦å¤–è¿˜æœ‰å…¶ä»–è¯­è¨€çš„ API æ¥å£ï¼‰ã€‚</p> <p><em>ä»¥ä¸‹ç®€ç§° ES</em>ã€‚</p> <p>REST API æœ€è¯¦å°½çš„æ–‡æ¡£åº”è¯¥å‚è€ƒï¼š<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/rest-apis.html" target="_blank" rel="noopener noreferrer">ES å®˜æ–¹ REST API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li><a href="#1-elasticsearch-rest-api-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F">1. ElasticSearch Rest API è¯­æ³•æ ¼å¼</a></li> <li><a href="#2-%E7%B4%A2%E5%BC%95-api">2. ç´¢å¼• API</a> <ul><li><a href="#21-%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95">2.1. åˆ›å»ºç´¢å¼•</a></li> <li><a href="#22-%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95">2.2. åˆ é™¤ç´¢å¼•</a></li> <li><a href="#23-%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95">2.3. æŸ¥çœ‹ç´¢å¼•</a></li> <li><a href="#24-%E7%B4%A2%E5%BC%95%E5%88%AB%E5%90%8D">2.4. ç´¢å¼•åˆ«å</a></li> <li><a href="#25-%E6%89%93%E5%BC%80%E5%85%B3%E9%97%AD%E7%B4%A2%E5%BC%95">2.5. æ‰“å¼€/å…³é—­ç´¢å¼•</a></li></ul></li> <li><a href="#3-%E6%96%87%E6%A1%A3">3. æ–‡æ¡£</a> <ul><li><a href="#31-%E5%88%9B%E5%BB%BA%E6%96%87%E6%A1%A3">3.1. åˆ›å»ºæ–‡æ¡£</a></li> <li><a href="#32-%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3">3.2. åˆ é™¤æ–‡æ¡£</a></li> <li><a href="#33-%E6%9B%B4%E6%96%B0%E6%96%87%E6%A1%A3">3.3. æ›´æ–°æ–‡æ¡£</a></li> <li><a href="#34-%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3">3.4. æŸ¥è¯¢æ–‡æ¡£</a></li> <li><a href="#35-%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2">3.5. å…¨æ–‡æœç´¢</a></li> <li><a href="#36-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97">3.6. é€»è¾‘è¿ç®—</a></li> <li><a href="#37-%E6%89%B9%E9%87%8F%E6%89%A7%E8%A1%8C">3.7. æ‰¹é‡æ‰§è¡Œ</a></li> <li><a href="#38-%E6%89%B9%E9%87%8F%E8%AF%BB%E5%8F%96">3.8. æ‰¹é‡è¯»å–</a></li> <li><a href="#39-%E6%89%B9%E9%87%8F%E6%9F%A5%E8%AF%A2">3.9. æ‰¹é‡æŸ¥è¯¢</a></li> <li><a href="#310-uri-search-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E4%B9%89">3.10. URI Search æŸ¥è¯¢è¯­ä¹‰</a></li> <li><a href="#311-request-body--dsl">3.11. Request Body &amp; DSL</a></li></ul></li> <li><a href="#4-%E9%9B%86%E7%BE%A4-api">4. é›†ç¾¤ API</a> <ul><li><a href="#41-%E9%9B%86%E7%BE%A4%E5%81%A5%E5%BA%B7-api">4.1. é›†ç¾¤å¥åº· API</a></li> <li><a href="#42-%E9%9B%86%E7%BE%A4%E7%8A%B6%E6%80%81-api">4.2. é›†ç¾¤çŠ¶æ€ API</a></li></ul></li> <li><a href="#5-%E8%8A%82%E7%82%B9-api">5. èŠ‚ç‚¹ API</a></li> <li><a href="#6-%E5%88%86%E7%89%87-api">6. åˆ†ç‰‡ API</a></li> <li><a href="#7-%E7%9B%91%E6%8E%A7-api">7. ç›‘æ§ API</a></li> <li><a href="#8-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">8. å‚è€ƒèµ„æ–™</a></li></ul> <h2 id="_1-elasticsearch-rest-api-è¯­æ³•æ ¼å¼"><a href="#_1-elasticsearch-rest-api-è¯­æ³•æ ¼å¼" class="header-anchor">#</a> 1. ElasticSearch Rest API è¯­æ³•æ ¼å¼</h2> <p>å‘ Elasticsearch å‘å‡ºçš„è¯·æ±‚çš„ç»„æˆéƒ¨åˆ†ä¸å…¶å®ƒæ™®é€šçš„ HTTP è¯·æ±‚æ˜¯ä¸€æ ·çš„ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> -X<span class="token operator">&lt;</span>VERB<span class="token operator">&gt;</span> <span class="token string">'&lt;PROTOCOL&gt;://&lt;HOST&gt;:&lt;PORT&gt;/&lt;PATH&gt;?&lt;QUERY_STRING&gt;'</span> -d <span class="token string">'&lt;BODY&gt;'</span>
</code></pre></div><ul><li><code>VERB</code>ï¼šHTTP æ–¹æ³•ï¼Œæ”¯æŒï¼š<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>HEAD</code>, <code>DELETE</code></li> <li><code>PROTOCOL</code>ï¼šhttp æˆ–è€… https åè®®ï¼ˆåªæœ‰åœ¨ Elasticsearch å‰é¢æœ‰ https ä»£ç†çš„æ—¶å€™å¯ç”¨ï¼‰</li> <li><code>HOST</code>ï¼šElasticsearch é›†ç¾¤ä¸­çš„ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸»æœºåï¼Œå¦‚æœæ˜¯åœ¨æœ¬åœ°çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±å« localhost</li> <li><code>PORT</code>ï¼šElasticsearch HTTP æœåŠ¡æ‰€åœ¨çš„ç«¯å£ï¼Œé»˜è®¤ä¸º 9200 PATH API è·¯å¾„ï¼ˆä¾‹å¦‚_count å°†è¿”å›é›†ç¾¤ä¸­æ–‡æ¡£çš„æ•°é‡ï¼‰ï¼Œ</li> <li><code>PATH</code>ï¼šå¯ä»¥åŒ…å«å¤šä¸ªç»„ä»¶ï¼Œä¾‹å¦‚ <code>_cluster/stats</code> æˆ–è€… <code>_nodes/stats/jvm</code></li> <li><code>QUERY_STRING</code>ï¼šä¸€äº›å¯é€‰çš„æŸ¥è¯¢è¯·æ±‚å‚æ•°ï¼Œä¾‹å¦‚?pretty å‚æ•°å°†ä½¿è¯·æ±‚è¿”å›æ›´åŠ ç¾è§‚æ˜“è¯»çš„ JSON æ•°æ®</li> <li><code>BODY</code>ï¼šä¸€ä¸ª JSON æ ¼å¼çš„è¯·æ±‚ä¸»ä½“ï¼ˆå¦‚æœè¯·æ±‚éœ€è¦çš„è¯ï¼‰</li></ul> <h2 id="_2-ç´¢å¼•-api"><a href="#_2-ç´¢å¼•-api" class="header-anchor">#</a> 2. ç´¢å¼• API</h2> <blockquote><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-indices.html" target="_blank" rel="noopener noreferrer">Elasticsearch å®˜æ–¹ä¹‹ cat ç´¢å¼• API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="_2-1-åˆ›å»ºç´¢å¼•"><a href="#_2-1-åˆ›å»ºç´¢å¼•" class="header-anchor">#</a> 2.1. åˆ›å»ºç´¢å¼•</h3> <p>æ–°å»º Indexï¼Œå¯ä»¥ç›´æ¥å‘ ES æœåŠ¡å™¨å‘å‡º <code>PUT</code> è¯·æ±‚ã€‚</p> <p>è¯­æ³•æ ¼å¼ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PUT /my_index
<span class="token punctuation">{</span>
    <span class="token string">&quot;settings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token punctuation">..</span>. any settings <span class="token punctuation">..</span>. <span class="token punctuation">}</span>,
    <span class="token string">&quot;mappings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;type_one&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token punctuation">..</span>. any mappings <span class="token punctuation">..</span>. <span class="token punctuation">}</span>,
        <span class="token string">&quot;type_two&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token punctuation">..</span>. any mappings <span class="token punctuation">..</span>. <span class="token punctuation">}</span>,
        <span class="token punctuation">..</span>.
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PUT /user
<span class="token punctuation">{</span>
  <span class="token string">&quot;settings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;index&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;number_of_shards&quot;</span><span class="token builtin class-name">:</span> <span class="token number">3</span>,
      <span class="token string">&quot;number_of_replicas&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æœåŠ¡å™¨è¿”å›ä¸€ä¸ª JSON å¯¹è±¡ï¼Œé‡Œé¢çš„ <code>acknowledged</code> å­—æ®µè¡¨ç¤ºæ“ä½œæˆåŠŸã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token string-property property">&quot;acknowledged&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token string-property property">&quot;shards_acknowledged&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token string-property property">&quot;index&quot;</span><span class="token operator">:</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä½ æƒ³ç¦æ­¢è‡ªåŠ¨åˆ›å»ºç´¢å¼•ï¼Œå¯ä»¥é€šè¿‡åœ¨ <code>config/elasticsearch.yml</code> çš„æ¯ä¸ªèŠ‚ç‚¹ä¸‹æ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>action<span class="token punctuation">.</span>auto_create_index<span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><h3 id="_2-2-åˆ é™¤ç´¢å¼•"><a href="#_2-2-åˆ é™¤ç´¢å¼•" class="header-anchor">#</a> 2.2. åˆ é™¤ç´¢å¼•</h3> <p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘é€ <code>DELETE</code> è¯·æ±‚ï¼Œåˆ é™¤è¿™ä¸ª Indexã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>DELETE /user
</code></pre></div><p>åˆ é™¤å¤šä¸ªç´¢å¼•</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">DELETE</span> <span class="token operator">/</span>index_one<span class="token punctuation">,</span>index_two
<span class="token constant">DELETE</span> <span class="token operator">/</span>index_<span class="token operator">*</span>
</code></pre></div><h3 id="_2-3-æŸ¥çœ‹ç´¢å¼•"><a href="#_2-3-æŸ¥çœ‹ç´¢å¼•" class="header-anchor">#</a> 2.3. æŸ¥çœ‹ç´¢å¼•</h3> <p>å¯ä»¥é€šè¿‡ GET è¯·æ±‚æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># æŸ¥çœ‹ç´¢å¼•ç›¸å…³ä¿¡æ¯</span>
GET kibana_sample_data_ecommerce

<span class="token comment"># æŸ¥çœ‹ç´¢å¼•çš„æ–‡æ¡£æ€»æ•°</span>
GET kibana_sample_data_ecommerce/_count

<span class="token comment"># æŸ¥çœ‹å‰10æ¡æ–‡æ¡£ï¼Œäº†è§£æ–‡æ¡£æ ¼å¼</span>
GET kibana_sample_data_ecommerce/_search

<span class="token comment"># _cat indices API</span>
<span class="token comment"># æŸ¥çœ‹indices</span>
GET /_cat/indices/kibana*?v<span class="token operator">&amp;</span><span class="token assign-left variable">s</span><span class="token operator">=</span>index

<span class="token comment"># æŸ¥çœ‹çŠ¶æ€ä¸ºç»¿çš„ç´¢å¼•</span>
GET /_cat/indices?v<span class="token operator">&amp;</span><span class="token assign-left variable">health</span><span class="token operator">=</span>green

<span class="token comment"># æŒ‰ç…§æ–‡æ¡£ä¸ªæ•°æ’åº</span>
GET /_cat/indices?v<span class="token operator">&amp;</span><span class="token assign-left variable">s</span><span class="token operator">=</span>docs.count:desc

<span class="token comment"># æŸ¥çœ‹å…·ä½“çš„å­—æ®µ</span>
GET /_cat/indices/kibana*?pri<span class="token operator">&amp;</span><span class="token function">v</span><span class="token operator">&amp;</span><span class="token assign-left variable">h</span><span class="token operator">=</span>health,index,pri,rep,docs.count,mt

<span class="token comment"># æŸ¥çœ‹ç´¢å¼•å ç”¨çš„å†…å­˜</span>
GET /_cat/indices?v<span class="token operator">&amp;</span><span class="token assign-left variable">h</span><span class="token operator">=</span>i,tm<span class="token operator">&amp;</span><span class="token assign-left variable">s</span><span class="token operator">=</span>tm:desc
</code></pre></div><h3 id="_2-4-ç´¢å¼•åˆ«å"><a href="#_2-4-ç´¢å¼•åˆ«å" class="header-anchor">#</a> 2.4. ç´¢å¼•åˆ«å</h3> <p>ES çš„ç´¢å¼•åˆ«åå°±æ˜¯ç»™ä¸€ä¸ªç´¢å¼•æˆ–è€…å¤šä¸ªç´¢å¼•èµ·çš„å¦ä¸€ä¸ªåå­—ï¼Œå…¸å‹çš„åº”ç”¨åœºæ™¯æ˜¯é’ˆå¯¹ç´¢å¼•ä½¿ç”¨çš„å¹³æ»‘åˆ‡æ¢ã€‚</p> <p>é¦–å…ˆï¼Œåˆ›å»ºç´¢å¼• my_indexï¼Œç„¶åå°†åˆ«å my_alias æŒ‡å‘å®ƒï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PUT /my_index
PUT /my_index/_alias/my_alias
</code></pre></div><p>ä¹Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹å½¢å¼ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>POST /_aliases
<span class="token punctuation">{</span>
  <span class="token string">&quot;actions&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token string">&quot;add&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;my_index&quot;</span>, <span class="token string">&quot;alias&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;my_alias&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­å¢åŠ åˆ«åå’Œç§»é™¤åˆ«åæ··åˆä½¿ç”¨ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>POST /_aliases
<span class="token punctuation">{</span>
  <span class="token string">&quot;actions&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token string">&quot;remove&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;my_index&quot;</span>, <span class="token string">&quot;alias&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;my_alias&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span> <span class="token string">&quot;add&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;my_index_v2&quot;</span>, <span class="token string">&quot;alias&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;my_alias&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåˆ«åä¸ç´¢å¼•æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œä½¿ç”¨åˆ«åç´¢å¼•æ–‡æ¡£æˆ–è€…æŸ¥è¯¢æ–‡æ¡£æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœåˆ«åå’Œç´¢å¼•æ˜¯ä¸€å¯¹å¤šçš„ï¼Œä½¿ç”¨åˆ«åä¼šå‘ç”Ÿé”™è¯¯ï¼Œå› ä¸º ES ä¸çŸ¥é“æŠŠæ–‡æ¡£å†™å…¥å“ªä¸ªç´¢å¼•ä¸­å»æˆ–è€…ä»å“ªä¸ªç´¢å¼•ä¸­è¯»å–æ–‡æ¡£ã€‚</p></blockquote> <p>ES ç´¢å¼•åˆ«åæœ‰ä¸ªå…¸å‹çš„åº”ç”¨åœºæ™¯æ˜¯å¹³æ»‘åˆ‡æ¢ï¼Œæ›´å¤šç»†èŠ‚å¯ä»¥æŸ¥çœ‹ <a href="https://www.knowledgedict.com/tutorial/elasticsearch-index-smooth-shift.html" target="_blank" rel="noopener noreferrer">Elasticsearchï¼ˆESï¼‰ç´¢å¼•é›¶åœæœºï¼ˆæ— éœ€é‡å¯ï¼‰æ— ç¼å¹³æ»‘åˆ‡æ¢çš„æ–¹æ³•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h3 id="_2-5-æ‰“å¼€-å…³é—­ç´¢å¼•"><a href="#_2-5-æ‰“å¼€-å…³é—­ç´¢å¼•" class="header-anchor">#</a> 2.5. æ‰“å¼€/å…³é—­ç´¢å¼•</h3> <p>é€šè¿‡åœ¨ <code>POST</code> ä¸­æ·»åŠ  <code>_close</code> æˆ– <code>_open</code> å¯ä»¥æ‰“å¼€ã€å…³é—­ç´¢å¼•ã€‚</p> <p>æ‰“å¼€ç´¢å¼•</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># æ‰“å¼€ç´¢å¼•</span>
POST kibana_sample_data_ecommerce/_open
<span class="token comment"># å…³é—­ç´¢å¼•</span>
POST kibana_sample_data_ecommerce/_close
</code></pre></div><h2 id="_3-æ–‡æ¡£"><a href="#_3-æ–‡æ¡£" class="header-anchor">#</a> 3. æ–‡æ¡£</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">############Create Document############</span>
<span class="token comment">#create document. è‡ªåŠ¨ç”Ÿæˆ _id</span>
POST users/_doc
<span class="token punctuation">{</span>
	<span class="token string">&quot;user&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Mike&quot;</span>,
    <span class="token string">&quot;post_date&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2019-04-15T14:12:12&quot;</span>,
    <span class="token string">&quot;message&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;trying out Kibana&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">#create document. æŒ‡å®šIdã€‚å¦‚æœidå·²ç»å­˜åœ¨ï¼ŒæŠ¥é”™</span>
PUT users/_doc/1?op_type<span class="token operator">=</span>create
<span class="token punctuation">{</span>
    <span class="token string">&quot;user&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Jack&quot;</span>,
    <span class="token string">&quot;post_date&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2019-05-15T14:12:12&quot;</span>,
    <span class="token string">&quot;message&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;trying out Elasticsearch&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">#create document. æŒ‡å®š ID å¦‚æœå·²ç»å­˜åœ¨ï¼Œå°±æŠ¥é”™</span>
PUT users/_create/1
<span class="token punctuation">{</span>
     <span class="token string">&quot;user&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Jack&quot;</span>,
    <span class="token string">&quot;post_date&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2019-05-15T14:12:12&quot;</span>,
    <span class="token string">&quot;message&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;trying out Elasticsearch&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">### Get Document by ID</span>
<span class="token comment">#Get the document by ID</span>
GET users/_doc/1


<span class="token comment">###  Index &amp; Update</span>
<span class="token comment">#Update æŒ‡å®š ID  (å…ˆåˆ é™¤ï¼Œåœ¨å†™å…¥)</span>
GET users/_doc/1

PUT users/_doc/1
<span class="token punctuation">{</span>
	<span class="token string">&quot;user&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Mike&quot;</span>

<span class="token punctuation">}</span>


<span class="token comment">#GET users/_doc/1</span>
<span class="token comment">#åœ¨åŸæ–‡æ¡£ä¸Šå¢åŠ å­—æ®µ</span>
POST users/_update/1/
<span class="token punctuation">{</span>
    <span class="token string">&quot;doc&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;post_date&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2019-05-15T14:12:12&quot;</span>,
        <span class="token string">&quot;message&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;trying out Elasticsearch&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>



<span class="token comment">### Delete by Id</span>
<span class="token comment"># åˆ é™¤æ–‡æ¡£</span>
DELETE users/_doc/1


<span class="token comment">### Bulk æ“ä½œ</span>
<span class="token comment">#æ‰§è¡Œä¸¤æ¬¡ï¼ŒæŸ¥çœ‹æ¯æ¬¡çš„ç»“æœ</span>

<span class="token comment">#æ‰§è¡Œç¬¬1æ¬¡</span>
POST _bulk
<span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>, <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;field1&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;value1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;delete&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>, <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;create&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test2&quot;</span>, <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;3&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;field1&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;value3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;update&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>, <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;doc&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;field2&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>


<span class="token comment">#æ‰§è¡Œç¬¬2æ¬¡</span>
POST _bulk
<span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>, <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;field1&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;value1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;delete&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>, <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;create&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test2&quot;</span>, <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;3&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;field1&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;value3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;update&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>, <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;doc&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;field2&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>

<span class="token comment">### mget æ“ä½œ</span>
GET /_mget
<span class="token punctuation">{</span>
    <span class="token string">&quot;docs&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>


<span class="token comment">#URIä¸­æŒ‡å®šindex</span>
GET /test/_mget
<span class="token punctuation">{</span>
    <span class="token string">&quot;docs&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>

            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>

            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>


GET /_mget
<span class="token punctuation">{</span>
    <span class="token string">&quot;docs&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,
            <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span>,
            <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;field3&quot;</span>, <span class="token string">&quot;field4&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;3&quot;</span>,
            <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;include&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">]</span>,
                <span class="token string">&quot;exclude&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;user.location&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">### msearch æ“ä½œ</span>
POST kibana_sample_data_ecommerce/_msearch
<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;query&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;match_all&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;size&quot;</span>:1<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;kibana_sample_data_flights&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;query&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;match_all&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;size&quot;</span>:2<span class="token punctuation">}</span>


<span class="token comment">### æ¸…é™¤æµ‹è¯•æ•°æ®</span>
<span class="token comment">#æ¸…é™¤æ•°æ®</span>
DELETE <span class="token function">users</span>
DELETE <span class="token builtin class-name">test</span>
DELETE test2
</code></pre></div><h3 id="_3-1-åˆ›å»ºæ–‡æ¡£"><a href="#_3-1-åˆ›å»ºæ–‡æ¡£" class="header-anchor">#</a> 3.1. åˆ›å»ºæ–‡æ¡£</h3> <h4 id="æŒ‡å®š-id"><a href="#æŒ‡å®š-id" class="header-anchor">#</a> æŒ‡å®š ID</h4> <p>è¯­æ³•æ ¼å¼ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PUT /_index/_type/_create/_id
</code></pre></div><p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PUT /user/_doc/_create/1
<span class="token punctuation">{</span>
  <span class="token string">&quot;user&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span>,
  <span class="token string">&quot;title&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å·¥ç¨‹å¸ˆ&quot;</span>,
  <span class="token string">&quot;desc&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;æ•°æ®åº“ç®¡ç†&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>æ³¨æ„ï¼šæŒ‡å®š Idï¼Œå¦‚æœ id å·²ç»å­˜åœ¨ï¼Œåˆ™æŠ¥é”™</p></blockquote> <h4 id="è‡ªåŠ¨ç”Ÿæˆ-id"><a href="#è‡ªåŠ¨ç”Ÿæˆ-id" class="header-anchor">#</a> è‡ªåŠ¨ç”Ÿæˆ ID</h4> <p>æ–°å¢è®°å½•çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®š Idï¼Œè¿™æ—¶è¦æ”¹æˆ POST è¯·æ±‚ã€‚</p> <p>è¯­æ³•æ ¼å¼ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>POST /_index/_type
</code></pre></div><p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>POST /user/_doc
<span class="token punctuation">{</span>
  <span class="token string">&quot;user&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span>,
  <span class="token string">&quot;title&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å·¥ç¨‹å¸ˆ&quot;</span>,
  <span class="token string">&quot;desc&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;è¶…çº§ç®¡ç†å‘˜&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2-åˆ é™¤æ–‡æ¡£"><a href="#_3-2-åˆ é™¤æ–‡æ¡£" class="header-anchor">#</a> 3.2. åˆ é™¤æ–‡æ¡£</h3> <p>è¯­æ³•æ ¼å¼ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>DELETE /_index/_doc/_id
</code></pre></div><p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>DELETE /user/_doc/1
</code></pre></div><h3 id="_3-3-æ›´æ–°æ–‡æ¡£"><a href="#_3-3-æ›´æ–°æ–‡æ¡£" class="header-anchor">#</a> 3.3. æ›´æ–°æ–‡æ¡£</h3> <h4 id="å…ˆåˆ é™¤-å†å†™å…¥"><a href="#å…ˆåˆ é™¤-å†å†™å…¥" class="header-anchor">#</a> å…ˆåˆ é™¤ï¼Œå†å†™å…¥</h4> <p>è¯­æ³•æ ¼å¼ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PUT /_index/_type/_id
</code></pre></div><p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PUT /user/_doc/1
<span class="token punctuation">{</span>
  <span class="token string">&quot;user&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;æå››&quot;</span>,
  <span class="token string">&quot;title&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;å·¥ç¨‹å¸ˆ&quot;</span>,
  <span class="token string">&quot;desc&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;è¶…çº§ç®¡ç†å‘˜&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="åœ¨åŸæ–‡æ¡£ä¸Šå¢åŠ å­—æ®µ"><a href="#åœ¨åŸæ–‡æ¡£ä¸Šå¢åŠ å­—æ®µ" class="header-anchor">#</a> åœ¨åŸæ–‡æ¡£ä¸Šå¢åŠ å­—æ®µ</h4> <p>è¯­æ³•æ ¼å¼ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>POST /_index/_update/_id
</code></pre></div><p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>POST /user/_update/1
<span class="token punctuation">{</span>
    <span class="token string">&quot;doc&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;30&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-4-æŸ¥è¯¢æ–‡æ¡£"><a href="#_3-4-æŸ¥è¯¢æ–‡æ¡£" class="header-anchor">#</a> 3.4. æŸ¥è¯¢æ–‡æ¡£</h3> <h4 id="æŒ‡å®š-id-æŸ¥è¯¢"><a href="#æŒ‡å®š-id-æŸ¥è¯¢" class="header-anchor">#</a> æŒ‡å®š ID æŸ¥è¯¢</h4> <p>è¯­æ³•æ ¼å¼ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>GET /_index/_type/_id
</code></pre></div><p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /user/_doc/1
</code></pre></div><p>ç»“æœï¼š</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;_doc&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span><span class="token operator">:</span> <span class="token number">536248</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;found&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;user&quot;</span><span class="token operator">:</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;å·¥ç¨‹å¸ˆ&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;æ•°æ®åº“ç®¡ç†&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿”å›çš„æ•°æ®ä¸­ï¼Œ<code>found</code> å­—æ®µè¡¨ç¤ºæŸ¥è¯¢æˆåŠŸï¼Œ<code>_source</code> å­—æ®µè¿”å›åŸå§‹è®°å½•ã€‚</p> <p>å¦‚æœ id ä¸æ­£ç¡®ï¼Œå°±æŸ¥ä¸åˆ°æ•°æ®ï¼Œ<code>found</code> å­—æ®µå°±æ˜¯ <code>false</code></p> <h4 id="æŸ¥è¯¢æ‰€æœ‰è®°å½•"><a href="#æŸ¥è¯¢æ‰€æœ‰è®°å½•" class="header-anchor">#</a> æŸ¥è¯¢æ‰€æœ‰è®°å½•</h4> <p>ä½¿ç”¨ <code>GET</code> æ–¹æ³•ï¼Œç›´æ¥è¯·æ±‚ <code>/index/type/_search</code>ï¼Œå°±ä¼šè¿”å›æ‰€æœ‰è®°å½•ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> <span class="token string">'localhost:9200/user/admin/_search?pretty'</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;took&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
  <span class="token string">&quot;timed_out&quot;</span> <span class="token builtin class-name">:</span> false,
  <span class="token string">&quot;_shards&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;total&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>,
    <span class="token string">&quot;successful&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>,
    <span class="token string">&quot;skipped&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;failed&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;hits&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;total&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
    <span class="token string">&quot;max_score&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1.0</span>,
    <span class="token string">&quot;hits&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;user&quot;</span>,
        <span class="token string">&quot;_type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;admin&quot;</span>,
        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;WWuoDG8BHwECs7SiYn93&quot;</span>,
        <span class="token string">&quot;_score&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1.0</span>,
        <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;user&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;æå››&quot;</span>,
          <span class="token string">&quot;title&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;å·¥ç¨‹å¸ˆ&quot;</span>,
          <span class="token string">&quot;desc&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;ç³»ç»Ÿç®¡ç†&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>,
      <span class="token punctuation">{</span>
        <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;user&quot;</span>,
        <span class="token string">&quot;_type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;admin&quot;</span>,
        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,
        <span class="token string">&quot;_score&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1.0</span>,
        <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;user&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span>,
          <span class="token string">&quot;title&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;å·¥ç¨‹å¸ˆ&quot;</span>,
          <span class="token string">&quot;desc&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;è¶…çº§ç®¡ç†å‘˜&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè¿”å›ç»“æœçš„ <code>took</code>å­—æ®µè¡¨ç¤ºè¯¥æ“ä½œçš„è€—æ—¶ï¼ˆå•ä½ä¸ºæ¯«ç§’ï¼‰ï¼Œ<code>timed_out</code>å­—æ®µè¡¨ç¤ºæ˜¯å¦è¶…æ—¶ï¼Œ<code>hits</code>å­—æ®µè¡¨ç¤ºå‘½ä¸­çš„è®°å½•ï¼Œé‡Œé¢å­å­—æ®µçš„å«ä¹‰å¦‚ä¸‹ã€‚</p> <ul><li><code>total</code>ï¼šè¿”å›è®°å½•æ•°ï¼Œæœ¬ä¾‹æ˜¯ 2 æ¡ã€‚</li> <li><code>max_score</code>ï¼šæœ€é«˜çš„åŒ¹é…ç¨‹åº¦ï¼Œæœ¬ä¾‹æ˜¯<code>1.0</code>ã€‚</li> <li><code>hits</code>ï¼šè¿”å›çš„è®°å½•ç»„æˆçš„æ•°ç»„ã€‚</li></ul> <p>è¿”å›çš„è®°å½•ä¸­ï¼Œæ¯æ¡è®°å½•éƒ½æœ‰ä¸€ä¸ª<code>_score</code>å­—æ®µï¼Œè¡¨ç¤ºåŒ¹é…çš„ç¨‹åºï¼Œé»˜è®¤æ˜¯æŒ‰ç…§è¿™ä¸ªå­—æ®µé™åºæ’åˆ—ã€‚</p> <h3 id="_3-5-å…¨æ–‡æœç´¢"><a href="#_3-5-å…¨æ–‡æœç´¢" class="header-anchor">#</a> 3.5. å…¨æ–‡æœç´¢</h3> <p>ES çš„æŸ¥è¯¢éå¸¸ç‰¹åˆ«ï¼Œä½¿ç”¨è‡ªå·±çš„<a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl.html" target="_blank" rel="noopener noreferrer">æŸ¥è¯¢è¯­æ³•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œè¦æ±‚ GET è¯·æ±‚å¸¦æœ‰æ•°æ®ä½“ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -H <span class="token string">'Content-Type: application/json'</span> <span class="token string">'localhost:9200/user/admin/_search?pretty'</span>  -d <span class="token string">'
{
&quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;ç®¡ç†&quot; }}
}'</span>
</code></pre></div><p>ä¸Šé¢ä»£ç ä½¿ç”¨ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-match-query.html" target="_blank" rel="noopener noreferrer">Match æŸ¥è¯¢<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼ŒæŒ‡å®šçš„åŒ¹é…æ¡ä»¶æ˜¯<code>desc</code>å­—æ®µé‡Œé¢åŒ…å«&quot;è½¯ä»¶&quot;è¿™ä¸ªè¯ã€‚è¿”å›ç»“æœå¦‚ä¸‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;timed_out&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;skipped&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;max_score&quot;</span> <span class="token operator">:</span> <span class="token number">0.38200712</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;WWuoDG8BHwECs7SiYn93&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">0.38200712</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;æå››&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;å·¥ç¨‹å¸ˆ&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;desc&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ç³»ç»Ÿç®¡ç†&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">0.3487891</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;å·¥ç¨‹å¸ˆ&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;desc&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;è¶…çº§ç®¡ç†å‘˜&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Elastic é»˜è®¤ä¸€æ¬¡è¿”å› 10 æ¡ç»“æœï¼Œå¯ä»¥é€šè¿‡<code>size</code>å­—æ®µæ”¹å˜è¿™ä¸ªè®¾ç½®ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>from</code>å­—æ®µï¼ŒæŒ‡å®šä½ç§»ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> <span class="token string">'localhost:9200/user/admin/_search'</span>  -d <span class="token string">'
{
  &quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;ç®¡ç†&quot; }},
  &quot;from&quot;: 1,
  &quot;size&quot;: 1
}'</span>
</code></pre></div><p>ä¸Šé¢ä»£ç æŒ‡å®šï¼Œä»ä½ç½® 1 å¼€å§‹ï¼ˆé»˜è®¤æ˜¯ä»ä½ç½® 0 å¼€å§‹ï¼‰ï¼Œåªè¿”å›ä¸€æ¡ç»“æœã€‚</p> <h3 id="_3-6-é€»è¾‘è¿ç®—"><a href="#_3-6-é€»è¾‘è¿ç®—" class="header-anchor">#</a> 3.6. é€»è¾‘è¿ç®—</h3> <p>å¦‚æœæœ‰å¤šä¸ªæœç´¢å…³é”®å­—ï¼Œ Elastic è®¤ä¸ºå®ƒä»¬æ˜¯<code>or</code>å…³ç³»ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> <span class="token string">'localhost:9200/user/admin/_search'</span>  -d <span class="token string">'
{
&quot;query&quot; : { &quot;match&quot; : { &quot;desc&quot; : &quot;è½¯ä»¶ ç³»ç»Ÿ&quot; }}
}'</span>
</code></pre></div><p>ä¸Šé¢ä»£ç æœç´¢çš„æ˜¯<code>è½¯ä»¶ or ç³»ç»Ÿ</code>ã€‚</p> <p>å¦‚æœè¦æ‰§è¡Œå¤šä¸ªå…³é”®è¯çš„<code>and</code>æœç´¢ï¼Œå¿…é¡»ä½¿ç”¨<a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-bool-query.html" target="_blank" rel="noopener noreferrer">å¸ƒå°”æŸ¥è¯¢<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">curl</span> -H <span class="token string">'Content-Type: application/json'</span> <span class="token string">'localhost:9200/user/admin/_search?pretty'</span>  -d <span class="token string">'
{
 &quot;query&quot;: {
  &quot;bool&quot;: {
   &quot;must&quot;: [
    { &quot;match&quot;: { &quot;desc&quot;: &quot;ç®¡ç†&quot; } },
    { &quot;match&quot;: { &quot;desc&quot;: &quot;è¶…çº§&quot; } }
   ]
  }
 }
}'</span>
</code></pre></div><h3 id="_3-7-æ‰¹é‡æ‰§è¡Œ"><a href="#_3-7-æ‰¹é‡æ‰§è¡Œ" class="header-anchor">#</a> 3.7. æ‰¹é‡æ‰§è¡Œ</h3> <p>æ”¯æŒåœ¨ä¸€æ¬¡ API è°ƒç”¨ä¸­ï¼Œå¯¹ä¸åŒçš„ç´¢å¼•è¿›è¡Œæ“ä½œ</p> <p>æ”¯æŒå››ç§ç±»å‹æ“ä½œ</p> <ul><li>index</li> <li>create</li> <li>update</li> <li>delete</li></ul> <p>æ“ä½œä¸­å•æ¡æ“ä½œå¤±è´¥ï¼Œå¹¶ä¸ä¼šå½±å“å…¶ä»–æ“ä½œã€‚</p> <p>è¿”å›ç»“æœåŒ…æ‹¬äº†æ¯ä¸€æ¡æ“ä½œæ‰§è¡Œçš„ç»“æœã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>POST _bulk
<span class="token punctuation">{</span> <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>, <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;field1&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;value1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;delete&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>, <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;create&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test2&quot;</span>, <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;3&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;field1&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;value3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;update&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>, <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;doc&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;field2&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre></div><blockquote><p>è¯´æ˜ï¼šä¸Šé¢çš„ç¤ºä¾‹å¦‚æœæ‰§è¡Œå¤šæ¬¡ï¼Œæ‰§è¡Œç»“æœéƒ½ä¸ä¸€æ ·ã€‚</p></blockquote> <h3 id="_3-8-æ‰¹é‡è¯»å–"><a href="#_3-8-æ‰¹é‡è¯»å–" class="header-anchor">#</a> 3.8. æ‰¹é‡è¯»å–</h3> <p>è¯»å¤šä¸ªç´¢å¼•</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /_mget
<span class="token punctuation">{</span>
    <span class="token string">&quot;docs&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¯»ä¸€ä¸ªç´¢å¼•</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /test/_mget
<span class="token punctuation">{</span>
    <span class="token string">&quot;docs&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>

            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>

            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

GET /_mget
<span class="token punctuation">{</span>
    <span class="token string">&quot;docs&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,
            <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span>,
            <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;field3&quot;</span>, <span class="token string">&quot;field4&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
            <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test&quot;</span>,
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;3&quot;</span>,
            <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;include&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">]</span>,
                <span class="token string">&quot;exclude&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;user.location&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-9-æ‰¹é‡æŸ¥è¯¢"><a href="#_3-9-æ‰¹é‡æŸ¥è¯¢" class="header-anchor">#</a> 3.9. æ‰¹é‡æŸ¥è¯¢</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>POST kibana_sample_data_ecommerce/_msearch
<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;query&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;match_all&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;size&quot;</span>:1<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;kibana_sample_data_flights&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;query&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;match_all&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;size&quot;</span>:2<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-10-uri-search-æŸ¥è¯¢è¯­ä¹‰"><a href="#_3-10-uri-search-æŸ¥è¯¢è¯­ä¹‰" class="header-anchor">#</a> 3.10. URI Search æŸ¥è¯¢è¯­ä¹‰</h3> <p>Elasticsearch URI Search éµå¾ª QueryString æŸ¥è¯¢è¯­ä¹‰ï¼Œå…¶å½¢å¼å¦‚ä¸‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /movies/_search?q<span class="token operator">=</span><span class="token number">2012</span><span class="token operator">&amp;</span><span class="token assign-left variable">df</span><span class="token operator">=</span>title<span class="token operator">&amp;</span><span class="token assign-left variable">sort</span><span class="token operator">=</span>year:desc<span class="token operator">&amp;</span><span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">10</span><span class="token operator">&amp;</span><span class="token assign-left variable">timeout</span><span class="token operator">=</span>1s
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong><code>q</code></strong> æŒ‡å®šæŸ¥è¯¢è¯­å¥ï¼Œä½¿ç”¨ QueryString è¯­ä¹‰</li> <li><strong><code>df</code></strong> é»˜è®¤å­—æ®µï¼Œä¸æŒ‡å®šæ—¶</li> <li><strong><code>sort</code></strong> æ’åºï¼šfrom å’Œ size ç”¨äºåˆ†é¡µ</li> <li><strong><code>profile</code></strong> å¯ä»¥æŸ¥çœ‹æŸ¥è¯¢æ—¶å¦‚ä½•è¢«æ‰§è¡Œçš„</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /movies/_search?q<span class="token operator">=</span>title:2012<span class="token operator">&amp;</span><span class="token assign-left variable">sort</span><span class="token operator">=</span>year:desc<span class="token operator">&amp;</span><span class="token assign-left variable">from</span><span class="token operator">=</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">10</span><span class="token operator">&amp;</span><span class="token assign-left variable">timeout</span><span class="token operator">=</span>1s
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="term-å’Œ-phrase"><a href="#term-å’Œ-phrase" class="header-anchor">#</a> Term å’Œ Phrase</h4> <p>Beautiful Mind ç­‰æ•ˆäº Beautiful OR Mind</p> <p>&quot;Beautiful Mind&quot; ç­‰æ•ˆäº Beautiful AND Mind</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Term æŸ¥è¯¢</span>
GET /movies/_search?q<span class="token operator">=</span>title:Beautiful Mind
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># ä½¿ç”¨å¼•å·ï¼ŒPhrase æŸ¥è¯¢</span>
GET /movies/_search?q<span class="token operator">=</span>title:<span class="token string">&quot;Beautiful Mind&quot;</span>
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="åˆ†ç»„ä¸å¼•å·"><a href="#åˆ†ç»„ä¸å¼•å·" class="header-anchor">#</a> åˆ†ç»„ä¸å¼•å·</h4> <p>title:(Beautiful AND Mind)</p> <p>title=&quot;Beautiful Mind&quot;</p> <h4 id="andã€orã€not-æˆ–è€…-ã€-ã€"><a href="#andã€orã€not-æˆ–è€…-ã€-ã€" class="header-anchor">#</a> ANDã€ORã€NOT æˆ–è€… &amp;&amp;ã€||ã€!</h4> <blockquote><p>æ³¨æ„ï¼šANDã€ORã€NOT å¿…é¡»å¤§å†™</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å¸ƒå°”æ“ä½œç¬¦</span>
GET /movies/_search?q<span class="token operator">=</span>title:<span class="token punctuation">(</span>Beautiful AND Mind<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>

GET /movies/_search?q<span class="token operator">=</span>title:<span class="token punctuation">(</span>Beautiful NOT Mind<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="èŒƒå›´æŸ¥è¯¢"><a href="#èŒƒå›´æŸ¥è¯¢" class="header-anchor">#</a> èŒƒå›´æŸ¥è¯¢</h4> <ul><li><code>[]</code> è¡¨ç¤ºé—­åŒºé—´</li> <li><code>{}</code> è¡¨ç¤ºå¼€åŒºé—´</li></ul> <p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># èŒƒå›´æŸ¥è¯¢ ,åŒºé—´å†™æ³•</span>
GET /movies/_search?q<span class="token operator">=</span>title:beautiful AND year:<span class="token punctuation">{</span><span class="token number">2010</span> TO <span class="token number">2018</span>%7D
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>

GET /movies/_search?q<span class="token operator">=</span>title:beautiful AND year:<span class="token punctuation">[</span>* TO <span class="token number">2018</span><span class="token punctuation">]</span>
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ç®—æ•°ç¬¦å·"><a href="#ç®—æ•°ç¬¦å·" class="header-anchor">#</a> ç®—æ•°ç¬¦å·</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 2010 å¹´ä»¥åçš„è®°å½•</span>
GET /movies/_search?q<span class="token operator">=</span>year:<span class="token operator">&gt;</span><span class="token number">2010</span>
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 2010 å¹´åˆ° 2018 å¹´çš„è®°å½•</span>
GET /movies/_search?q<span class="token operator">=</span>year:<span class="token punctuation">(</span><span class="token operator">&gt;</span><span class="token number">2010</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;=</span><span class="token number">2018</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 2010 å¹´åˆ° 2018 å¹´çš„è®°å½•</span>
GET /movies/_search?q<span class="token operator">=</span>year:<span class="token punctuation">(</span>+<span class="token operator">&gt;</span><span class="token number">2010</span> +<span class="token operator">&lt;=</span><span class="token number">2018</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="é€šé…ç¬¦æŸ¥è¯¢"><a href="#é€šé…ç¬¦æŸ¥è¯¢" class="header-anchor">#</a> é€šé…ç¬¦æŸ¥è¯¢</h4> <ul><li><code>?</code> ä»£è¡¨ 1 ä¸ªå­—ç¬¦</li> <li><code>*</code> ä»£è¡¨ 0 æˆ–å¤šä¸ªå­—ç¬¦</li></ul> <p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /movies/_search?q<span class="token operator">=</span>title:mi?d
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>

GET /movies/_search?q<span class="token operator">=</span>title:b*
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="header-anchor">#</a> æ­£åˆ™è¡¨è¾¾å¼</h4> <p>title:[bt]oy</p> <h4 id="æ¨¡ç³ŠåŒ¹é…ä¸è¿‘ä¼¼æŸ¥è¯¢"><a href="#æ¨¡ç³ŠåŒ¹é…ä¸è¿‘ä¼¼æŸ¥è¯¢" class="header-anchor">#</a> æ¨¡ç³ŠåŒ¹é…ä¸è¿‘ä¼¼æŸ¥è¯¢</h4> <p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># ç›¸ä¼¼åº¦åœ¨ 1 ä¸ªå­—ç¬¦ä»¥å†…</span>
GET /movies/_search?q<span class="token operator">=</span>title:beautifl~1
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># ç›¸ä¼¼åº¦åœ¨ 2 ä¸ªå­—ç¬¦ä»¥å†…</span>
GET /movies/_search?q<span class="token operator">=</span>title:<span class="token string">&quot;Lord Rings&quot;</span>~2
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-11-request-body-dsl"><a href="#_3-11-request-body-dsl" class="header-anchor">#</a> 3.11. Request Body &amp; DSL</h3> <p>Elasticsearch é™¤äº† URI Search æŸ¥è¯¢æ–¹å¼ï¼Œè¿˜æ”¯æŒå°†æŸ¥è¯¢è¯­å¥é€šè¿‡ Http Request Body å‘èµ·æŸ¥è¯¢ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /kibana_sample_data_ecommerce/_search?ignore_unavailable<span class="token operator">=</span>true
<span class="token punctuation">{</span>
	<span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;true&quot;</span>,
	<span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
	  <span class="token string">&quot;match_all&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="header-anchor">#</a> åˆ†é¡µ</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /kibana_sample_data_ecommerce/_search?ignore_unavailable<span class="token operator">=</span>true
<span class="token punctuation">{</span>
  <span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
  <span class="token string">&quot;from&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
  <span class="token string">&quot;size&quot;</span><span class="token builtin class-name">:</span> <span class="token number">10</span>,
  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;match_all&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="æ’åº"><a href="#æ’åº" class="header-anchor">#</a> æ’åº</h4> <p>æœ€å¥½åœ¨æ•°å­—å‹æˆ–æ—¥æœŸå‹å­—æ®µä¸Šæ’åº</p> <p>å› ä¸ºå¯¹äºå¤šå€¼ç±»å‹æˆ–åˆ†æè¿‡çš„å­—æ®µæ’åºï¼Œç³»ç»Ÿä¼šé€‰ä¸€ä¸ªå€¼ï¼Œæ— æ³•å¾—çŸ¥è¯¥å€¼</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /kibana_sample_data_ecommerce/_search?ignore_unavailable<span class="token operator">=</span>true
<span class="token punctuation">{</span>
  <span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
  <span class="token string">&quot;sort&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token string">&quot;order_date&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;desc&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>,
  <span class="token string">&quot;from&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>,
  <span class="token string">&quot;size&quot;</span><span class="token builtin class-name">:</span> <span class="token number">10</span>,
  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;match_all&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="source-è¿‡æ»¤"><a href="#source-è¿‡æ»¤" class="header-anchor">#</a> _source è¿‡æ»¤</h4> <p>å¦‚æœ <code>_source</code> æ²¡æœ‰å­˜å‚¨ï¼Œé‚£å°±åªè¿”å›åŒ¹é…çš„æ–‡æ¡£çš„å…ƒæ•°æ®</p> <p><code>_source</code> æ”¯æŒä½¿ç”¨é€šé…ç¬¦ï¼Œå¦‚ï¼š<code>_source[&quot;name*&quot;, &quot;desc*&quot;]</code></p> <p>ç¤ºä¾‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /kibana_sample_data_ecommerce/_search?ignore_unavailable<span class="token operator">=</span>true
<span class="token punctuation">{</span>
  <span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
  <span class="token string">&quot;_source&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;order_date&quot;</span>,
    <span class="token string">&quot;category.keyword&quot;</span>
  <span class="token punctuation">]</span>,
  <span class="token string">&quot;from&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>,
  <span class="token string">&quot;size&quot;</span><span class="token builtin class-name">:</span> <span class="token number">10</span>,
  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;match_all&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="è„šæœ¬å­—æ®µ"><a href="#è„šæœ¬å­—æ®µ" class="header-anchor">#</a> è„šæœ¬å­—æ®µ</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /kibana_sample_data_ecommerce/_search?ignore_unavailable<span class="token operator">=</span>true
<span class="token punctuation">{</span>
  <span class="token string">&quot;profile&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
  <span class="token string">&quot;script_fields&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;new_field&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;script&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;lang&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;painless&quot;</span>,
        <span class="token string">&quot;source&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;doc['order_date'].value+' hello'&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;from&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>,
  <span class="token string">&quot;size&quot;</span><span class="token builtin class-name">:</span> <span class="token number">10</span>,
  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;match_all&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="ä½¿ç”¨æŸ¥è¯¢è¡¨è¾¾å¼-match"><a href="#ä½¿ç”¨æŸ¥è¯¢è¡¨è¾¾å¼-match" class="header-anchor">#</a> ä½¿ç”¨æŸ¥è¯¢è¡¨è¾¾å¼ - Match</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>POST movies/_search
<span class="token punctuation">{</span>
  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;title&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;last christmas&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

POST movies/_search
<span class="token punctuation">{</span>
  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;title&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;last christmas&quot;</span>,
        <span class="token string">&quot;operator&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;and&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="çŸ­è¯­æœç´¢-match-phrase"><a href="#çŸ­è¯­æœç´¢-match-phrase" class="header-anchor">#</a> çŸ­è¯­æœç´¢ - Match Phrase</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>POST movies/_search
<span class="token punctuation">{</span>
  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;match_phrase&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span>
        <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;last christmas&quot;</span>

      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-é›†ç¾¤-api"><a href="#_4-é›†ç¾¤-api" class="header-anchor">#</a> 4. é›†ç¾¤ API</h2> <blockquote><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster.html" target="_blank" rel="noopener noreferrer">Elasticsearch å®˜æ–¹ä¹‹ Cluster API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>ä¸€äº›é›†ç¾¤çº§åˆ«çš„ API å¯èƒ½ä¼šåœ¨èŠ‚ç‚¹çš„å­é›†ä¸Šè¿è¡Œï¼Œè¿™äº›èŠ‚ç‚¹å¯ä»¥ç”¨èŠ‚ç‚¹è¿‡æ»¤å™¨æŒ‡å®šã€‚ä¾‹å¦‚ï¼Œä»»åŠ¡ç®¡ç†ã€èŠ‚ç‚¹ç»Ÿè®¡å’ŒèŠ‚ç‚¹ä¿¡æ¯ API éƒ½å¯ä»¥æŠ¥å‘Šæ¥è‡ªä¸€ç»„è¿‡æ»¤èŠ‚ç‚¹è€Œä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„ç»“æœã€‚</p> <p>èŠ‚ç‚¹è¿‡æ»¤å™¨ä»¥é€—å·åˆ†éš”çš„å•ä¸ªè¿‡æ»¤å™¨åˆ—è¡¨çš„å½¢å¼ç¼–å†™ï¼Œæ¯ä¸ªè¿‡æ»¤å™¨ä»æ‰€é€‰å­é›†ä¸­æ·»åŠ æˆ–åˆ é™¤èŠ‚ç‚¹ã€‚æ¯ä¸ªè¿‡æ»¤å™¨å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š</p> <ul><li><code>_all</code>ï¼šå°†æ‰€æœ‰èŠ‚ç‚¹æ·»åŠ åˆ°å­é›†</li> <li><code>_local</code>ï¼šå°†æœ¬åœ°èŠ‚ç‚¹æ·»åŠ åˆ°å­é›†</li> <li><code>_master</code>ï¼šå°†å½“å‰ä¸»èŠ‚ç‚¹æ·»åŠ åˆ°å­é›†</li> <li>æ ¹æ®èŠ‚ç‚¹ ID æˆ–èŠ‚ç‚¹åå°†åŒ¹é…èŠ‚ç‚¹æ·»åŠ åˆ°å­é›†</li> <li>æ ¹æ® IP åœ°å€æˆ–ä¸»æœºåå°†åŒ¹é…èŠ‚ç‚¹æ·»åŠ åˆ°å­é›†</li> <li>ä½¿ç”¨é€šé…ç¬¦ï¼Œå°†èŠ‚ç‚¹åã€åœ°å€åæˆ–ä¸»æœºååŒ¹é…çš„èŠ‚ç‚¹æ·»åŠ åˆ°å­é›†</li> <li><code>master:true</code>, <code>data:true</code>, <code>ingest:true</code>, <code>voting_only:true</code>, <code>ml:true</code> æˆ– <code>coordinating_only:true</code>, åˆ†åˆ«æ„å‘³ç€å°†æ‰€æœ‰ä¸»èŠ‚ç‚¹ã€æ‰€æœ‰æ•°æ®èŠ‚ç‚¹ã€æ‰€æœ‰æ‘„å–èŠ‚ç‚¹ã€æ‰€æœ‰ä»…æŠ•ç¥¨èŠ‚ç‚¹ã€æ‰€æœ‰æœºå™¨å­¦ä¹ èŠ‚ç‚¹å’Œæ‰€æœ‰åè°ƒèŠ‚ç‚¹æ·»åŠ åˆ°å­é›†ä¸­ã€‚</li> <li><code>master:false</code>, <code>data:false</code>, <code>ingest:false</code>, <code>voting_only:true</code>, <code>ml:false</code> æˆ– <code>coordinating_only:false</code>, åˆ†åˆ«æ„å‘³ç€å°†æ‰€æœ‰ä¸»èŠ‚ç‚¹ã€æ‰€æœ‰æ•°æ®èŠ‚ç‚¹ã€æ‰€æœ‰æ‘„å–èŠ‚ç‚¹ã€æ‰€æœ‰ä»…æŠ•ç¥¨èŠ‚ç‚¹ã€æ‰€æœ‰æœºå™¨å­¦ä¹ èŠ‚ç‚¹å’Œæ‰€æœ‰åè°ƒèŠ‚ç‚¹æ’é™¤åœ¨å­é›†å¤–ã€‚</li> <li>é…å¯¹æ¨¡å¼ï¼Œä½¿ç”¨ <code>*</code> é€šé…ç¬¦ï¼Œæ ¼å¼ä¸º <code>attrname:attrvalue</code>ï¼Œå°†æ‰€æœ‰å…·æœ‰è‡ªå®šä¹‰èŠ‚ç‚¹å±æ€§çš„èŠ‚ç‚¹æ·»åŠ åˆ°å­é›†ä¸­ï¼Œå…¶åç§°å’Œå€¼ä¸ç›¸åº”çš„æ¨¡å¼åŒ¹é…ã€‚è‡ªå®šä¹‰èŠ‚ç‚¹å±æ€§æ˜¯é€šè¿‡ <code>node.attr.attrname: attrvalue</code> å½¢å¼åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„ã€‚</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å¦‚æœæ²¡æœ‰ç»™å‡ºè¿‡æ»¤å™¨ï¼Œé»˜è®¤æ˜¯æŸ¥è¯¢æ‰€æœ‰èŠ‚ç‚¹</span>
GET /_nodes
<span class="token comment"># æŸ¥è¯¢æ‰€æœ‰èŠ‚ç‚¹</span>
GET /_nodes/_all
<span class="token comment"># æŸ¥è¯¢æœ¬åœ°èŠ‚ç‚¹</span>
GET /_nodes/_local
<span class="token comment"># æŸ¥è¯¢ä¸»èŠ‚ç‚¹</span>
GET /_nodes/_master
<span class="token comment"># æ ¹æ®åç§°æŸ¥è¯¢èŠ‚ç‚¹ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰</span>
GET /_nodes/node_name_goes_here
GET /_nodes/node_name_goes_*
<span class="token comment"># æ ¹æ®åœ°å€æŸ¥è¯¢èŠ‚ç‚¹ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰</span>
GET /_nodes/10.0.0.3,10.0.0.4
GET /_nodes/10.0.0.*
<span class="token comment"># æ ¹æ®è§„åˆ™æŸ¥è¯¢èŠ‚ç‚¹</span>
GET /_nodes/_all,master:false
GET /_nodes/data:true,ingest:true
GET /_nodes/coordinating_only:true
GET /_nodes/master:true,voting_only:false
<span class="token comment"># æ ¹æ®è‡ªå®šä¹‰å±æ€§æŸ¥è¯¢èŠ‚ç‚¹ï¼ˆå¦‚ï¼šæŸ¥è¯¢é…ç½®æ–‡ä»¶ä¸­å« node.attr.rack:2 å±æ€§çš„èŠ‚ç‚¹ï¼‰</span>
GET /_nodes/rack:2
GET /_nodes/ra*:2
GET /_nodes/ra*:2*
</code></pre></div><h3 id="_4-1-é›†ç¾¤å¥åº·-api"><a href="#_4-1-é›†ç¾¤å¥åº·-api" class="header-anchor">#</a> 4.1. é›†ç¾¤å¥åº· API</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /_cluster/health
GET /_cluster/health?level<span class="token operator">=</span>shards
GET /_cluster/health/kibana_sample_data_ecommerce,kibana_sample_data_flights
GET /_cluster/health/kibana_sample_data_flights?level<span class="token operator">=</span>shards
</code></pre></div><h3 id="_4-2-é›†ç¾¤çŠ¶æ€-api"><a href="#_4-2-é›†ç¾¤çŠ¶æ€-api" class="header-anchor">#</a> 4.2. é›†ç¾¤çŠ¶æ€ API</h3> <p>é›†ç¾¤çŠ¶æ€ API è¿”å›è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤çŠ¶æ€çš„å…ƒæ•°æ®ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /_cluster/state
</code></pre></div><h2 id="_5-èŠ‚ç‚¹-api"><a href="#_5-èŠ‚ç‚¹-api" class="header-anchor">#</a> 5. èŠ‚ç‚¹ API</h2> <blockquote><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-nodes.html" target="_blank" rel="noopener noreferrer">Elasticsearch å®˜æ–¹ä¹‹ cat Nodes API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>â€”â€”è¿”å›æœ‰å…³é›†ç¾¤èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># æŸ¥çœ‹é»˜è®¤çš„å­—æ®µ</span>
GET /_cat/nodes?v<span class="token operator">=</span>true
<span class="token comment"># æŸ¥çœ‹æŒ‡å®šçš„å­—æ®µ</span>
GET /_cat/nodes?v<span class="token operator">=</span>true<span class="token operator">&amp;</span><span class="token assign-left variable">h</span><span class="token operator">=</span>id,ip,port,v,m
</code></pre></div><h2 id="_6-åˆ†ç‰‡-api"><a href="#_6-åˆ†ç‰‡-api" class="header-anchor">#</a> 6. åˆ†ç‰‡ API</h2> <blockquote><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-shards.html" target="_blank" rel="noopener noreferrer">Elasticsearch å®˜æ–¹ä¹‹ cat Shards API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>â€”â€”shards å‘½ä»¤æ˜¯å“ªäº›èŠ‚ç‚¹åŒ…å«å“ªäº›åˆ†ç‰‡çš„è¯¦ç»†è§†å›¾ã€‚å®ƒä¼šå‘Šè¯‰ä½ å®ƒæ˜¯ä¸»è¿˜æ˜¯å‰¯æœ¬ã€æ–‡æ¡£æ•°é‡ã€å®ƒåœ¨ç£ç›˜ä¸Šå ç”¨çš„å­—èŠ‚æ•°ä»¥åŠå®ƒæ‰€åœ¨çš„èŠ‚ç‚¹ã€‚</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># æŸ¥çœ‹é»˜è®¤çš„å­—æ®µ</span>
GET /_cat/shards
<span class="token comment"># æ ¹æ®åç§°æŸ¥è¯¢åˆ†ç‰‡ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰</span>
GET /_cat/shards/my-index-*
<span class="token comment"># æŸ¥çœ‹æŒ‡å®šçš„å­—æ®µ</span>
GET /_cat/shards?h<span class="token operator">=</span>index,shard,prirep,state,unassigned.reason
</code></pre></div><h2 id="_7-ç›‘æ§-api"><a href="#_7-ç›‘æ§-api" class="header-anchor">#</a> 7. ç›‘æ§ API</h2> <p>Elasticsearch ä¸­é›†ç¾¤ç›¸å…³çš„å¥åº·ã€ç»Ÿè®¡ç­‰ç›¸å…³çš„ä¿¡æ¯éƒ½æ˜¯å›´ç»•ç€ <code>cat</code> API è¿›è¡Œçš„ã€‚</p> <p>é€šè¿‡ GET è¯·æ±‚å‘é€ catï¼Œä¸‹é¢åˆ—å‡ºäº†æ‰€æœ‰å¯ç”¨çš„ APIï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>GET /_cat

<span class="token operator">=</span>^.^<span class="token operator">=</span>
/_cat/allocation
/_cat/shards
/_cat/shards/<span class="token punctuation">{</span>index<span class="token punctuation">}</span>
/_cat/master
/_cat/nodes
/_cat/tasks
/_cat/indices
/_cat/indices/<span class="token punctuation">{</span>index<span class="token punctuation">}</span>
/_cat/segments
/_cat/segments/<span class="token punctuation">{</span>index<span class="token punctuation">}</span>
/_cat/count
/_cat/count/<span class="token punctuation">{</span>index<span class="token punctuation">}</span>
/_cat/recovery
/_cat/recovery/<span class="token punctuation">{</span>index<span class="token punctuation">}</span>
/_cat/health
/_cat/pending_tasks
/_cat/aliases
/_cat/aliases/<span class="token punctuation">{</span>alias<span class="token punctuation">}</span>
/_cat/thread_pool
/_cat/thread_pool/<span class="token punctuation">{</span>thread_pools<span class="token punctuation">}</span>
/_cat/plugins
/_cat/fielddata
/_cat/fielddata/<span class="token punctuation">{</span>fields<span class="token punctuation">}</span>
/_cat/nodeattrs
/_cat/repositories
/_cat/snapshots/<span class="token punctuation">{</span>repository<span class="token punctuation">}</span>
/_cat/templates
</code></pre></div><h2 id="_8-å‚è€ƒèµ„æ–™"><a href="#_8-å‚è€ƒèµ„æ–™" class="header-anchor">#</a> 8. å‚è€ƒèµ„æ–™</h2> <ul><li><strong>å®˜æ–¹</strong> <ul><li><a href="https://www.elastic.co/cn/products/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" target="_blank" rel="noopener noreferrer">Elasticsearch å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/db-tutorial/edit/master/docs/nosql/elasticsearch/ElasticsearchRestApi.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">3 days ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/db-tutorial/assets/js/app.3241dbe7.js" defer></script><script src="/db-tutorial/assets/js/4.4288f8e2.js" defer></script><script src="/db-tutorial/assets/js/16.6bca419e.js" defer></script><script src="/db-tutorial/assets/js/5.9d6e4fe2.js" defer></script>
  </body>
</html>
